{"version":3,"sources":["../../../../assets/Script/assets/Script/Level1.js"],"names":["game","require","cc","Class","extends","Component","properties","boardNode","Node","knifeNode","knifePrefab","Prefab","layoutKnife","Layout","labelScore","Label","knifeMini","knifeAudio","type","AudioClip","default","knifeFail","knifeNodeArr","isThrow","score","numberKnife","level","onLoad","createLayoutKnife","node","on","throwKnife","boardRotation","remainKnife","childrenCount","children","active","runAction","sequence","moveTo","v2","x","y","width","callFunc","audioEngine","play","isHit","Math","abs","angle","loseGame","createKnifePlayer","string","nextLevel","start","update","dt","angleKnife"],"mappings":";;;;;;AAAA,IAAMA,OAAOC,QAAQ,MAAR,CAAb;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,mBAAWL,GAAGM,IADN;AAERC,mBAAWP,GAAGM,IAFN;AAGRE,qBAAaR,GAAGS,MAHR;AAIRC,qBAAaV,GAAGW,MAJR;AAKRC,oBAAYZ,GAAGa,KALP;AAMRC,mBAAWd,GAAGS,MANN;AAORM,oBAAY;AACTC,kBAAMhB,GAAGiB,SADA;AAETC,qBAAS;AAFA,SAPJ;AAWRC,mBAAW;AACPH,kBAAMhB,GAAGiB,SADF;AAERC,qBAAS;AAFD,SAXH;AAeRE,sBAAc,EAfN;AAgBRC,iBAAS,IAhBD;AAiBRC,eAAO,CAjBC;AAkBRC,qBAAa,CAlBL;AAmBRC,eAAO;AAnBC,KAHP;;AAyBLC,UAzBK,oBAyBI;AACL3B,aAAK4B,iBAAL,CAAuB,CAAvB,EAA0B,KAAKZ,SAA/B,EAA0C,KAAKJ,WAA/C;AACA,aAAKiB,IAAL,CAAUC,EAAV,CAAa,YAAb,EAA2B,KAAKC,UAAhC,EAA4C,IAA5C;AACA,aAAKC,aAAL,GAAqB,CAArB;AACA,aAAKC,WAAL,GAAmB,KAAKrB,WAAL,CAAiBiB,IAAjB,CAAsBK,aAAzC;AACH,KA9BI;AAgCLH,cAhCK,wBAgCQ;AAAA;;AACT,YAAI,KAAKR,OAAT,EAAkB;AACd,iBAAKA,OAAL,GAAe,KAAf;AACA,iBAAKX,WAAL,CAAiBiB,IAAjB,CAAsBM,QAAtB,CAA+B,KAAKV,WAApC,EAAiDW,MAAjD,GAA0D,KAA1D;AACA,iBAAKH,WAAL;AACA,iBAAKR,WAAL;AACA,iBAAKhB,SAAL,CAAe4B,SAAf,CACInC,GAAGoC,QAAH,CACIpC,GAAGqC,MAAH,CAAU,GAAV,EAAerC,GAAGsC,EAAH,CAAM,KAAK/B,SAAL,CAAegC,CAArB,EAAwB,KAAKlC,SAAL,CAAemC,CAAf,GAAmB,KAAKnC,SAAL,CAAeoC,KAAf,GAAuB,CAAlE,CAAf,CADJ,EAEIzC,GAAG0C,QAAH,CAAY,YAAM;AACd1C,mBAAG2C,WAAH,CAAeC,IAAf,CAAoB,MAAK7B,UAAzB,EAAqC,KAArC,EAA4C,CAA5C;AACA,oBAAI8B,QAAQ,KAAZ;AAFc;AAAA;AAAA;;AAAA;AAGd,yCAAsB,MAAKzB,YAA3B,8HAAyC;AAAA,4BAAhCb,SAAgC;;AACrC,4BAAIuC,KAAKC,GAAL,CAASxC,UAAUyC,KAAnB,IAA4B,EAA5B,IAAmC,MAAMF,KAAKC,GAAL,CAASxC,UAAUyC,KAAnB,CAAP,GAAoC,EAA1E,EAA8E;AAC1EH,oCAAQ,IAAR;AACA;AACH;AACJ;AARa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AASd,oBAAIA,KAAJ,EAAW;AACP/C,yBAAKmD,QAAL,CAAc,MAAK9B,SAAnB,EAA8B,MAAKZ,SAAnC,EAA8C,MAAKe,KAAnD,EAA0D,MAAKE,KAA/D;AACH,iBAFD,MAEO;AACH1B,yBAAKoD,iBAAL,CAAuB,MAAK1C,WAA5B,EAAyC,MAAKD,SAA9C,EAAyD,MAAKa,YAA9D,EAA4E,MAAKO,IAAjF;AACA,0BAAKN,OAAL,GAAe,IAAf;AACA,0BAAKC,KAAL;AACA,0BAAKV,UAAL,CAAgBuC,MAAhB,GAAyB,MAAK7B,KAA9B;AACA,wBAAI,MAAKS,WAAL,KAAqB,CAAzB,EAA4B;AACxB,8BAAKV,OAAL,GAAe,KAAf;AACAvB,6BAAKsD,SAAL,CAAe,MAAK5B,KAApB,EAA2B,MAAKF,KAAhC;AACH;AACJ;AACJ,aArBD,CAFJ,CADJ;AA2BH;AACJ,KAlEI;AAoEL+B,SApEK,mBAoEG,CAEP,CAtEI;AAwELC,UAxEK,kBAwEEC,EAxEF,EAwEM;AACPzD,aAAK0D,UAAL,CAAgB,KAAKnD,SAArB,EAAgC,KAAKyB,aAArC,EAAoD,KAAKV,YAAzD;AACH;AA1EI,CAAT","file":"Level1.js","sourceRoot":"../../../../assets/Script","sourcesContent":["const game = require(\"Game\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        boardNode: cc.Node,\n        knifeNode: cc.Node,\n        knifePrefab: cc.Prefab,\n        layoutKnife: cc.Layout,\n        labelScore: cc.Label,\n        knifeMini: cc.Prefab,\n        knifeAudio: {\n           type: cc.AudioClip,\n           default: null,\n        },\n        knifeFail: {\n            type: cc.AudioClip,\n           default: null,\n        },\n        knifeNodeArr: [],\n        isThrow: true,\n        score: 0,\n        numberKnife: 0,\n        level: 1,\n    },\n\n    onLoad() {\n        game.createLayoutKnife(7, this.knifeMini, this.layoutKnife);\n        this.node.on('touchstart', this.throwKnife, this);\n        this.boardRotation = 3;\n        this.remainKnife = this.layoutKnife.node.childrenCount;\n    },\n\n    throwKnife() {\n        if (this.isThrow) {\n            this.isThrow = false;\n            this.layoutKnife.node.children[this.numberKnife].active = false;\n            this.remainKnife--;\n            this.numberKnife++;\n            this.knifeNode.runAction(\n                cc.sequence(\n                    cc.moveTo(0.1, cc.v2(this.knifeNode.x, this.boardNode.y - this.boardNode.width / 2)),\n                    cc.callFunc(() => {\n                        cc.audioEngine.play(this.knifeAudio, false, 1);\n                        let isHit = false;\n                        for (let knifeNode of this.knifeNodeArr) {\n                            if (Math.abs(knifeNode.angle) < 15 || (360 - Math.abs(knifeNode.angle)) < 15) {\n                                isHit = true;\n                                break;\n                            }\n                        }\n                        if (isHit) {\n                            game.loseGame(this.knifeFail, this.knifeNode, this.score, this.level);\n                        } else {\n                            game.createKnifePlayer(this.knifePrefab, this.knifeNode, this.knifeNodeArr, this.node);\n                            this.isThrow = true;\n                            this.score++;\n                            this.labelScore.string = this.score;\n                            if (this.remainKnife === 0) {\n                                this.isThrow = false;\n                                game.nextLevel(this.level, this.score);\n                            }\n                        }\n                    })\n                )\n            );\n        }\n    },\n\n    start() {\n        \n    },\n\n    update(dt) {\n        game.angleKnife(this.boardNode, this.boardRotation, this.knifeNodeArr);\n    },\n});"]}